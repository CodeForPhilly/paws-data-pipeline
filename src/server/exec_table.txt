-- Drop table

-- DROP TABLE public.execution_status;

CREATE TABLE public.execution_status (
	"_id" serial NOT NULL,
	job_id int8 NOT NULL,
	status varchar(32) NOT NULL,
	details varchar NOT NULL,
	update_stamp timestamp(0) NOT NULL DEFAULT now(),
	CONSTRAINT execution_status_pk PRIMARY KEY (_id)
);

-- Table Triggers

create trigger last_upd_trigger before
insert
    or
update
    on
    public.execution_status for each row execute function last_upd_trig();


--

CREATE FUNCTION last_upd_trig() RETURNS trigger
   LANGUAGE plpgsql AS
$$BEGIN
   NEW.lastupdate := current_timestamp;
   RETURN NEW;
END;$$;

CREATE TRIGGER last_upd_trigger
   BEFORE INSERT OR UPDATE ON finds
   FOR EACH ROW
   EXECUTE PROCEDURE last_upd_trig();





create trigger last_upd_trigger before
insert
    or
update
    on
    public.execution_status for each row execute function last_upd_trig()